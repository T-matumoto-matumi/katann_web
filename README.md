# Web Catan Project

React (Frontend) + Python FastAPI (Backend) で動作する、ブラウザ版カタンの実装プロジェクトです。

## 🛠 現在の開発状況

現在 **Phase 4 (都市建設・資源生産の強化)** まで完了しています。
基本的なゲームループは動作しますが、トレード機能などはまだ実装されていません（次回実装予定）。

### ✅ 実装済み機能
- **マップ生成**: ランダムな資源タイルの配置、ナンバーチップの配置。
- **初期配置 (Snake Draft)**:
    - 4人のプレイヤー (Red, Blue, Orange, White) が順番に開拓地と道を配置。
    - 1->2->3->4番手、その後 4->3->2->1番手の順で配置。
- **資源の産出**:
    - サイコロを振り、出目に対応する土地から資源を配布。
    - 都市 (City) からは2倍の資源が産出されます。
- **建設システム**:
    - **街道 (Road)**: `レンガ` + `木材`
    - **開拓地 (Settlement)**: `レンガ` + `木材` + `羊毛` + `小麦`
    - **都市 (City)**: `鉱石` x3 + `小麦` x2 （既存の開拓地をクリックしてアップグレード）
- **ターン進行**: サイコロ -> 建設 -> ターン終了

### 🚧 未実装・開発中
- **トレード機能**: 銀行取引 (4:1) および プレイヤー間トレード（現在無効化中）。
- **勝利条件**: 10点先取での勝利判定。
- **発展カード**: 騎士カードや進歩カードの実装。
- **盗賊 (Robber)**: 7が出た時の資源破棄や強奪ロジックの詳細。

---

## 🎲 遊び方 (How to Play)

### 1. ゲームの開始 (起動)
サーバーとクライアントをそれぞれ起動してください。

**Backend (Terminal 1):**
```bash
uv run uvicorn backend.main:app --host 0.0.0.0 --port 8000 --reload
```

**Frontend (Terminal 2):**
```bash
cd frontend
npm run dev
```
ブラウザで `http://localhost:5173` にアクセスします。

### 2. 初期配置フェーズ
画面の指示に従い、各プレイヤーが開拓地と街道を2つずつ配置します。
- **頂点 (Vertex)** をクリックして開拓地を建設。
- **辺 (Edge)** をクリックして街道を建設。

### 3. メインフェーズ (Game Loop)
自分の手番では以下のことができます。

1.  **🎲 Roll Dice**:
    - 必ず最初にサイコロを振ります。出目に応じて全員に資源が配られます。
2.  **🔨 Build** (建設):
    - **Road**: 資源がある状態で、自分の建物や道に繋がる「辺」をクリック。
    - **Settlement**: 資源がある状態で、自分の道に繋がり、かつ隣接する建物がない「頂点」をクリック。
    - **City**: 資源がある状態で、既に建っている「自分の開拓地」をクリックして都市へアップグレード。
    - ※ 資源が足りない場合やルール上置けない場所はクリックしても反応しません。
    - ※ `Dev: Resources` ボタンを使うと、デバッグ用に全資源を+10個入手できます（テスト用）。
3.  **End Turn**:
    - 手番を終了し、次のプレイヤーへ交代します。

---

## 📂 技術スタック
- **Frontend**: React, TypeScript, Vite, TailwindCSS, Socket.io-client
- **Backend**: Python 3.12, FastAPI, Python-SocketIO, Pydantic
